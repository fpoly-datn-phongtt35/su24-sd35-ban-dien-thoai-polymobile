<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
  <title>Title</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
        rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
        crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
          integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
          crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
        integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
        crossorigin="anonymous" referrerpolicy="no-referrer"/>
</head>
<style>
  .circle-card {
    border-radius: 50%;
    width: 150px;
    height: 150px;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
    transition: 0.3s;
  }

  .circle-card:hover {
    box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.2);
  }

  .circle-card img {
    border-radius: 50%;
    width: 150px;
    height: 150px;
    object-fit: cover;
  }

  .circle-card .card-body {
    text-align: center;
  }
</style>
<style>
  .custom-file-input {
    display: none;
  }

  .custom-file-label {
    display: inline-block;
    cursor: pointer;
    padding: 10px;
    background-color: #007bff;
    color: white;
    border-radius: 5px;
    text-align: center;
    font-size: 24px;
  }

  .custom-file-label:hover {
    background-color: #0056b3;
  }

  .card-img {
    cursor: pointer;
  }
</style>

<body class="bg-light">
<div class="container mt-5">
  <form action="#" th:action="@{/add-KhachHang}" th:object="${requestAddKhachHang}" method="post"
        enctype="multipart/form-data">
    <div class="row">
      <div class="col">
        <div class="card">
          <div class="alert alert-light" role="alert">
            Thông tin khách hàng
          </div>
          <div class="input-group mb-5 offset-md-4">
            <div class="row">
              <div class="col-12 col-md-6 col-lg-4">
                <div class="card circle-card">
                  <img id="image-preview" class="card-img" alt="Preview Image">
                </div>
                <br>
              </div>
              <div class="col-12">
                <h5 class="card-title">
                  <input type="file" class="custom-file-input" name="photo" id="photo-input" >
                  <!--                    <input type="hidden" th:field="*{anhKhachHang}" id="file-name">-->
                  <!--                    <span id="file-name-display"></span>-->
                </h5>
              </div>
            </div>
          </div>
          <div class="row offset-sm-0">
            <div class="input-group mb-4">
              <div class="col-10">
                <input type="text" class="form-control" placeholder="Họ Và Tên"
                       th:field="*{tenKhachHang}"
                       aria-describedby="basic-addon1" required>
              </div>
            </div>
            <div class="row">
              <div class="col">
                <div class="input-group mb-4">
                  <div class="col-10">
                    <input type="date" class="form-control" placeholder="Ngày Sinh"
                           th:field="*{ngaySinhInput}"
                           aria-describedby="basic-addon1">
                  </div>
                </div>
              </div>
              <div class="col">
                <div class="row">
                  <div class="col">
                    <div class="form-check">
                      <input class="form-check-input" type="radio" id="male" th:field="*{gioiTinh}"
                             value="Nam">
                      <label class="form-check-label" for="male">Nam</label>
                    </div>
                  </div>
                  <div class="col-8">
                    <div class="form-check">
                      <input class="form-check-input" type="radio" id="female"
                             th:field="*{gioiTinh}" value="Nữ">
                      <label class="form-check-label" for="female">Nữ</label>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="input-group mb-4">
              <div class="col-10">
                <input type="email" class="form-control" placeholder="Email" th:field="*{email}"
                       aria-describedby="basic-addon1" required>
              </div>
            </div>
            <div class="input-group mb-4">
              <div class="col-10">
                <input type="text" class="form-control" placeholder="Số điện thoại"
                       th:field="*{soDienThoai}"
                       aria-describedby="basic-addon1" required>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col">
        <div class="card">
          <div class="alert alert-light " role="alert">
            Thông tin địa chỉ mặc định
          </div>
          <div class="row offset-sm-0">
            <div class="input-group mb-4">
              <div class="col-10">
                <input type="text" class="form-control" placeholder="Họ Và Tên người nhận"
                       th:field="*{tenNguoiNhan}"
                       aria-describedby="basic-addon1" required>
              </div>
            </div>
            <div class="input-group mb-4">
              <div class="col-10">
                <input type="text" class="form-control" placeholder="Số Điện Thoại người nhận"
                       th:field="*{soDienThoaiNguoiNhan}" aria-describedby="basic-addon1" required>
              </div>
            </div>
            <div class="input-group mb-4">
              <div class="col-10">
                <input type="text" class="form-control" placeholder="Địa Chỉ" th:field="*{diaChi}"
                       aria-describedby="basic-addon1" required>
              </div>
            </div>
            <div class="input-group mb-4">
              <div class="col-10">
                <select class="form-select" id="province" th:field="*{thanhPho}">
                  <option value="" selected>Chọn Tỉnh/Thành phố</option>
                  <!-- Thêm các option cho tỉnh/thành phố từ JavaScript -->
                </select>
              </div>
            </div>
            <div class="input-group mb-4">
              <div class="col-10">
                <select class="form-select" id="district" th:field="*{huyen}">
                  <option value="" selected>Chọn Quận/Huyện</option>
                  <!-- Thêm các option cho quận/huyện từ JavaScript -->
                </select>
              </div>
            </div>
            <div class="input-group mb-4">
              <div class="col-10">
                <select class="form-select" id="ward" th:field="*{xa}">
                  <option value="" selected>Chọn Phường/Xã</option>
                  <!-- Thêm các option cho phường/xã từ JavaScript -->
                </select>
              </div>
            </div>
          </div>
          <button type="submit" class="btn btn-success">Lưu</button>
        </div>
      </div>
    </div>
  </form>
</div>
<script>
  function validateForm() {
    var tenKhachHang = document.querySelector('*{tenKhachHang}').value;
    var email = document.querySelector('*{email}').value;
    var soDienThoai = document.querySelector('*{soDienThoai}').value;
    var diaChi = document.querySelector('*{diaChi}').value;
    var thanhPho = document.querySelector('*{thanhPho}').value;
    var huyen = document.querySelector('*{huyen}').value;
    var xa = document.querySelector('*{xa}').value;
    // Kiểm tra tên khách hàng
    if (!tenKhachHang) {
      alert('Vui lòng nhập tên khách hàng');
      return false;
    }
    // Kiểm tra email
    var emailRegex = /^[\w-]+(\.[\w-]+)*@([\w-]+\.)+[a-zA-Z]{2,7}$/;
    if (email && !emailRegex.test(email)) {
      alert('Email không hợp lệ');
      return false;
    }
    // Kiểm tra số điện thoại
    var phoneRegex = /(03|05|07|08|09|01[2|6|8|9])+([0-9]{8})\b/;
    if (soDienThoai && !phoneRegex.test(soDienThoai)) {
      alert('Số điện thoại không hợp lệ');
      return false;
    }
    // Kiểm tra nếu cả số điện thoại và email đều không được nhập
    if (!soDienThoai && !email) {
      alert('Vui lòng nhập email hoặc số điện thoại');
      return false;
    }
    // Kiểm tra địa chỉ
    if (!diaChi) {
      alert('Vui lòng nhập địa chỉ');
      return false;
    }
    // Kiểm tra tỉnh/thành phố
    if (!thanhPho) {
      alert('Vui lòng chọn tỉnh/thành phố');
      return false;
    }
    // Kiểm tra huyện
    if (!huyen) {
      alert('Vui lòng chọn huyện');
      return false;
    }
    // Kiểm tra xã
    if (!xa) {
      alert('Vui lòng chọn xã');
      return false;
    }
    return true;
  }

  document.getElementById('image-preview').addEventListener('click', function () {
    document.getElementById('photo-input').click();
  });

  document.getElementById('photo-input').addEventListener('change', function (event) {
    const fileInput = event.target;
    const file = fileInput.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onload = function (e) {
        document.getElementById('image-preview').src = e.target.result;
      };
      reader.readAsDataURL(file);

      // Lưu tên tệp vào input hidden
      const fileName = file.name;
      document.getElementById('file-name').value = fileName;
      document.getElementById('file-name-display').textContent = `Tên file: ${fileName}`;

      // Hiển thị giá trị của fileName trong console log
      console.log(`${fileName}`);
    }
  });
</script>
</body>
</html>