<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="/client/layout/layout-client.html"
>
<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
    <!--    Custom link-->
    <th:block layout:fragment="head_link">
        <!-- Bootstrap CSS -->
        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flickity/2.2.2/flickity.min.css">
        <link href="/css/client/iphone-product.css" rel="stylesheet">
    </th:block>

</head>

<!-- Custom styles for this page -->

<body layout:fragment="content">
<div class="container-content">
    <div class="container ">
        <div class="row">
            <aside class="col-7">
                <div id="carouselExampleIndicators" class="carousel slide" data-touch="false" data-interval="false">
                    <ol class="carousel-indicators">

                    </ol>
                    <div class="carousel-inner">

                    </div>
                    <a class="carousel-control-prev" type="button" data-target="#carouselExampleIndicators"
                       data-slide="prev">
                        <span class="carousel-control-prev-icon bg-secondary rounded-circle p-3"
                              aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="carousel-control-next" type="button" data-target="#carouselExampleIndicators"
                       data-slide="next">
                        <span class="carousel-control-next-icon bg-secondary rounded-circle p-3"
                              aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                    </a>
                </div>
            </aside>
            <aside class="col-5">
                <h3 class="h3 font-weight-bold text-white" th:text="${sp.getTenSanPham()}"></h3>

                <!--                gia san pham-->
                <div id="sp-gia">

                </div>
                <!--                Btn rom-->
                <div class="form-group">
                    <label for="container-btn-rom">Dung lượng</label>
                    <div class="" id="container-btn-rom">
                        <div class="btn-group-toggle" data-toggle="buttons">
                            <label class="btn btn-secondary active">
                                <input type="radio" name="options" checked> Active
                            </label>
                            <label class="btn btn-secondary">
                                <input type="radio" name="options"> Radio
                            </label>
                            <label class="btn btn-secondary">
                                <input type="radio" name="options"> Radio
                            </label>
                        </div>
                    </div>
                </div>
                <!--                btn mau sac-->
                <div class="form-group">
                    <label for="container-btn-mau-sac">Màu sắc: <span id="ten-mau-sac">Tên màu sắc</span></label>
                    <div class="" id="container-btn-mau-sac">
                        <div class="btn-group-toggle" data-toggle="buttons">
                        </div>
                    </div>
                </div>

                <!--                Khuyen mai-->
                <div class="container" style="border-radius: 20px; background-color: #2F3033">
                    <h5 class="font-weight-bold text-light h5">Khuyến mãi</h5>
                    <h6 class="text-light h6">Giá và khuyến mãi có thể kết thúc sớm hơn dự kiến</h6>
                    <hr class="border-light">
                    <ul class="khuyen-mai-ap-dung ml-4"></ul>
                    <hr>

                </div>
                <hr class="border-light">


                <a class="bg-primary d-block rounded-lg w-100 py-3 text-center" >
                    <span class="text-decoration-none text-light h3 " th:onclick="addToCartAndCheckout()">Mua ngay</span>
                </a>
                <a class="bg-primary d-block rounded-lg w-100 py-3 text-center my-4" th:onclick="handleClick()">
                    <span class="text-decoration-none text-light h3 ">Thêm vào giỏ hàng</span>
                </a>
            </aside>


        </div>


    </div>


</div>

<div class="container-content bg-light" style="height: 500px; vertical-align: middle">
    <div><h1 class="h1 text-center border-danger" style="line-height: 500px">Gợi ý sản phẩm</h1></div>
</div>
<!--/ Thông tin chung sản phẩm-->
<div class="container-content bg-light">

    <ul class="nav nav-pills mb-3 justify-content-center" id="pills-tab" role="tablist">
        <li class="nav-item m-3" role="presentation">
            <button class="nav-link active" id="pills-contact-tab" data-toggle="pill" data-target="#pills-contact"
                    type="button" role="tab" aria-controls="pills-contact" aria-selected="true">Mô tả
            </button>
        </li>
        <li class="nav-item m-3" role="presentation">
            <button class="nav-link" id="pills-home-tab" data-toggle="pill" data-target="#pills-home" type="button"
                    role="tab" aria-controls="pills-home" aria-selected="false">Thông số kỹ thuật
            </button>
        </li>
        <li class="nav-item m-3" role="presentation">
            <button class="nav-link" id="pills-profile-tab" data-toggle="pill" data-target="#pills-profile"
                    type="button" role="tab" aria-controls="pills-profile" aria-selected="false">Đánh giá sản phẩm
            </button>
        </li>

    </ul>

    <div class="tab-content container" id="pills-tabContent">
        <div class="tab-pane fade active show " id="pills-contact" role="tabpanel" aria-labelledby="pills-contact-tab">
            <div class="position-relative" style="height: 400px; overflow: hidden;">
                <!--                "-->
                <th:block th:utext="${sp.getMoTa()}"></th:block>
                <div class="text-center bg-article" style="vertical-align: middle">
                    <h5 class="mt-2 h5"
                        onclick="$(this).closest('.position-relative').css('height','100%'); $(this).hide()"
                        style="cursor: zoom-in;  line-height: 60px">Xem thêm
                    </h5></div>
            </div>


        </div>
        <div class="tab-pane fade" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab">
            <div id="accordion">
                <!--                Màn hình-->
                <div class="card">
                    <div class="card-header" id="manHinh">
                        <h5 class="mb-0">
                            <button class="btn btn-link" data-toggle="collapse" data-target="#manHinhCollapse"
                                    aria-expanded="true" aria-controls="manHinhCollapse">
                                Màn hình
                            </button>
                        </h5>
                    </div>
                    <div id="manHinhCollapse" class="collapse show" aria-labelledby="manHinh" data-parent="#accordion">
                        <div class="card-body">
                            <ul th:object="${sp.manHinh}">
                                <li><span>Công nghệ màn hình:</span> <a th:text="*{congNgheManHinh.ten}"
                                                                        th:href="*{congNgheManHinh.link}"></a></li>
                                <li><span>Độ phân giải:</span> <a th:text="*{doPhanGiai}"></a></li>
                                <li><span>Màn hình rộng:</span> <a th:text="*{manHinhRong}"></a></li>
                                <li><span>Độ sáng tối đa:</span> <a th:text="*{doSangToiDa}"></a></li>
                                <li><span>Mặt kính cảm ứng:</span> <a th:text="*{matKinhCamUng.ten}"
                                                                      th:href="*{matKinhCamUng.link}"></a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <!--                Camera sau-->
                <div class="card">
                    <div class="card-header" id="cameraSau">
                        <h5 class="mb-0">
                            <button class="btn btn-link" data-toggle="collapse" data-target="#cameraSauCollapse"
                                    aria-expanded="true" aria-controls="cameraSauCollapse">
                                Camera sau
                            </button>
                        </h5>
                    </div>
                    <div id="cameraSauCollapse" class="collapse" aria-labelledby="cameraSau">
                        <div class="card-body">
                            <ul th:object="${sp.cameraSau}">
                                <li><span>Độ phân giải:</span> <a th:text="*{doPhanGiai}"></a></li>
                                <li><span>Đèn flash</span> <a th:text="*{denFlash}"></a></li>
                                <li><span>Tính năng:</span>
                                    <ul class="py-2">
                                        <li th:each="tinhNang: ${sp.cameraSau.tinhNangCameras}" th:object="${tinhNang}">
                                            <a th:text="*{ten}" th:href="*{link}"></a>
                                        </li>
                                    </ul>
                                </li>
                                <li><span>Đèn flash</span> <a th:text="*{denFlash}"></a></li>


                            </ul>
                        </div>
                    </div>
                </div>

                <!--                Camera trước-->
                <div class="card">
                    <div class="card-header" id="cameraTruoc">
                        <h5 class="mb-0">
                            <button class="btn btn-link" data-toggle="collapse" data-target="#cameraTruocCollapse"
                                    aria-expanded="true" aria-controls="cameraTruocCollapse">
                                Camera trước
                            </button>
                        </h5>
                    </div>
                    <div id="cameraTruocCollapse" class="collapse" aria-labelledby="cameraTruoc">
                        <div class="card-body">
                            <ul th:object="${sp.cameraTruoc}">
                                <li><span>Độ phân giải:</span> <a th:text="*{doPhanGiai}"></a></li>
                                <li><span>Tính năng:</span>
                                    <ul class="py-2">
                                        <li th:each="tinhNang: ${sp.cameraTruoc.tinhNangCameras}"
                                            th:object="${tinhNang}">
                                            <a th:text="*{ten}" th:href="*{link}"></a>
                                        </li>
                                    </ul>
                                </li>


                            </ul>
                        </div>
                    </div>
                </div>
                <!--                Hệ điều hành và cpu-->
                <div class="card">
                    <div class="card-header" id="heDieuHanhVaCpu">
                        <h5 class="mb-0">
                            <button class="btn btn-link" data-toggle="collapse" data-target="#heDieuHanhVaCpuCollapse"
                                    aria-expanded="true" aria-controls="heDieuHanhVaCpuCollapse">
                                Hệ điều hành và CPU
                            </button>
                        </h5>
                    </div>
                    <div id="heDieuHanhVaCpuCollapse" class="collapse" aria-labelledby="heDieuHanhVaCpu">
                        <div class="card-body">
                            <ul th:object="${sp.heDieuHanhVaCpu}">
                                <li><span>Hệ điều hành:</span> <a th:text="*{heDieuHanh.ten}"
                                                                  th:href="*{heDieuHanh.link}"></a></li>
                                <li><span>Chip xử lý (CPU):</span> <a th:text="*{cpu.ten}" th:href="*{cpu.link}"></a>
                                </li>
                                <li><span>Chip đồ họa (GPU):</span> <a th:text="*{cpu.gpu}"></a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <!--                Bộ  nhớ và lưu trữ-->
                <div class="card">
                    <div class="card-header" id="boNhoVaLuuTru">
                        <h5 class="mb-0">
                            <button class="btn btn-link" data-toggle="collapse" data-target="#boNhoVaLuuTruCollapse"
                                    aria-expanded="true" aria-controls="boNhoVaLuuTruCollapse">
                                Bộ nhớ và lưu trữ
                            </button>
                        </h5>
                    </div>
                    <div id="boNhoVaLuuTruCollapse" class="collapse show" aria-labelledby="boNhoVaLuuTru">
                        <div class="card-body">
                            <ul th:object="${sp}">
                                <li><span>Ram:</span> <a th:text="*{ram}"></a></li>
                                <li><span>Dung lượng</span> <a></a></li>
                                <li><span>Danh bạ</span> <a>Không giới hạn</a></li>

                            </ul>
                        </div>
                    </div>
                </div>
                <!--                Kết nối-->
                <div class="card">
                    <div class="card-header" id="ketNoi">
                        <h5 class="mb-0">
                            <button class="btn btn-link" data-toggle="collapse" data-target="#ketNoiCollapse"
                                    aria-expanded="true" aria-controls="ketNoiCollapse">
                                Kết nối
                            </button>
                        </h5>
                    </div>
                    <div id="ketNoiCollapse" class="collapse" aria-labelledby="ketNoi">
                        <div class="card-body">
                            <ul th:object="${sp.ketNoi}">
                                <li><span>Mạng di động:</span> <a th:text="*{mangDiDong}"></a></li>
                                <li><span>Sim:</span> <a th:text="*{sim}"></a></li>
                                <li><span>Wifi:</span>
                                    <ul class="py-2">
                                        <li th:each="wifi: ${sp.ketNoi.wifi}" th:object="${wifi}">
                                            <a th:text="*{ten}" th:href="*{link}"></a>
                                        </li>
                                    </ul>
                                </li>
                                <li><span>Bluetooth:</span>
                                    <ul class="py-2">
                                        <li th:each="bluetooth: ${sp.ketNoi.bluetooth}" th:object="${bluetooth}">
                                            <a th:text="*{ten}" th:href="*{link}"></a>
                                        </li>
                                    </ul>
                                </li>
                                <li><span>Cổng kết nối/sạc:</span> <a th:text="*{congSac}"></a></li>
                                <li><span>Jack tai nghe:</span> <a th:text="*{jackTaiNghe}"></a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <!--               Pin & Sạc-->
                <div class="card">
                    <div class="card-header" id="pinVaSac">
                        <h5 class="mb-0">
                            <button class="btn btn-link" data-toggle="collapse" data-target="#pinVaSacCollapse"
                                    aria-expanded="true" aria-controls="pinVaSacCollapse">
                                Pin & Sạc
                            </button>
                        </h5>
                    </div>
                    <div id="pinVaSacCollapse" class="collapse" aria-labelledby="pinVaSac">
                        <div class="card-body">
                            <ul th:object="${sp.pinVaSac}">
                                <li><span>Dung lượng pin:</span> <a th:text="*{dungLuongPin}"></a></li>
                                <li><span>Loại pin:</span> <a th:text="*{loaiPin}"></a></li>
                                <li><span>Hỗ trợ sạc tối đa:</span> <a th:text="*{hoTroSacToiDa}"></a></li>
                                <li><span>Công nghệp pin:</span>
                                    <ul class="py-2">
                                        <li th:each="congNghePin: ${sp.pinVaSac.congNghePin}"
                                            th:object="${congNghePin}">
                                            <a th:text="*{ten}" th:href="*{link}"></a>
                                        </li>
                                    </ul>
                                </li>


                            </ul>
                        </div>
                    </div>
                </div>

                <!--                Thông tin chung-->
                <div class="card">
                    <div class="card-header" id="thongTinChung">
                        <h5 class="mb-0">
                            <button class="btn btn-link" data-toggle="collapse" data-target="#thongTinChungCollapse"
                                    aria-expanded="true" aria-controls="thongTinChungCollapse">
                                Thông tin chung
                            </button>
                        </h5>
                    </div>
                    <div id="thongTinChungCollapse" class="collapse show" aria-labelledby="thongTinChung">
                        <div class="card-body">
                            <ul th:object="${sp.thongTinChung}">
                                <li><span>Thiết kế:</span> <a th:text="*{thietKe}"></a></li>
                                <li><span>Chất liệu:</span> <a th:text="*{chatLieu}"></a></li>
                                <li><span>Kích thước, khối lượng:</span> <a th:text="*{kichThuocKhoiLuong}"></a></li>
                                <li><span>Tính năng đặc biệt:</span>
                                    <ul class="py-2">
                                        <li th:each="tinhNang: ${sp.thongTinChung.tinhNangDacBiet}"
                                            th:object="${tinhNang}">
                                            <a th:text="*{ten}" th:href="*{link}"></a>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

            </div>
        </div>
        <div class="tab-pane fade" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab">
            <p>Đánh giá sản phẩm</p>
        </div>

    </div>

</div>

<!--Đánh giá sản phẩm-->
<div class="container-content bg-light pt-5">
    <div class="container" id="rating">
        <div class="container" style="border-radius: 10px;border: 1px solid gray; height: 600px">
            <div class="px-3">
                <h3 class="h3 font-weight-bold">
                    Đánh giá sản phẩm <span th:text="${sp.tenSanPham}"></span>
                </h3>
                <div class="d-flex pt-4" style="vertical-align: middle">
                    <h4 class="h4 font-weight-bold pr-2" style="color:#fbc634">
                        4.0
                    </h4>
                    <div class="ratings">
                        <i class="fa fa-star rating-color"></i>
                        <i class="fa fa-star rating-color"></i>
                        <i class="fa fa-star rating-color"></i>
                        <i class="fa fa-star rating-color"></i>
                        <i class="fa fa-star"></i>
                    </div>
                    <h6 class="h4 font-weight-bold pr-2" >
                       12 đánh giá
                    </h6>
                </div>
                <div class="p-3">
                    <div class="d-flex mt-3">
                        <span>5 <i class="fa fa-star"></i></span>
                        <div class="progress mx-2" style="height: 5px; width: 250px; margin-top: 7px">
                            <div class="progress-bar" role="progressbar" style="width: 25%;" aria-valuenow="25"
                                 aria-valuemin="0" aria-valuemax="100">
                            </div>
                        </div>
                        <span>25%</span>
                    </div>
                    <div class="d-flex mt-3">
                        <span>4 <i class="fa fa-star"></i></span>
                        <div class="progress mx-2" style="height: 5px; width: 250px; margin-top: 7px">
                            <div class="progress-bar" role="progressbar" style="width: 25%;" aria-valuenow="25"
                                 aria-valuemin="0" aria-valuemax="100">
                            </div>
                        </div>
                        <span>25%</span>
                    </div>
                    <div class="d-flex mt-3">
                        <span>3 <i class="fa fa-star"></i></span>
                        <div class="progress mx-2" style="height: 5px; width: 250px; margin-top: 7px">
                            <div class="progress-bar" role="progressbar" style="width: 25%;" aria-valuenow="25"
                                 aria-valuemin="0" aria-valuemax="100">
                            </div>
                        </div>
                        <span>25%</span>
                    </div>
                    <div class="d-flex mt-3">
                        <span>2 <i class="fa fa-star"></i></span>
                        <div class="progress mx-2" style="height: 5px; width: 250px; margin-top: 7px">
                            <div class="progress-bar" role="progressbar" style="width: 25%;" aria-valuenow="25"
                                 aria-valuemin="0" aria-valuemax="100">
                            </div>
                        </div>
                        <span>25%</span>
                    </div>
                    <div class="d-flex mt-3">
                        <span>1 <i class="fa fa-star"></i></span>
                        <div class="progress mx-2" style="height: 5px; width: 250px; margin-top: 7px">
                            <div class="progress-bar" role="progressbar" style="width: 25%;" aria-valuenow="25"
                                 aria-valuemin="0" aria-valuemax="100">
                            </div>
                        </div>
                        <span>25%</span>
                    </div>
                </div>

                <hr>
                <div class="row justify-content-between">
                    <div class="col-6 text-center">
                        <button class="py-2 mx-2 w-100 rounded-lg btn btn-outline-secondary">Xem 5 đánh giá</button>
                    </div>
                    <div class="col-6 text-center">
                        <button class="py-2 mx-2 w-100 rounded-lg btn btn-outline-primary">Viết đánh giá</button>
                    </div>
                </div>


            </div>

        </div>
    </div>
</div>

</body>

<th:block layout:fragment="bottom_link">
    <!-- jQuery and Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/numeral.js/2.0.6/numeral.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/flickity/2.2.2/flickity.pkgd.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
    <script src="/js/client/iphone-product.js"></script>
    <script type="text/javascript">
        function getCookie(name) {
            let cookieArr = document.cookie.split(";");

            for (let i = 0; i < cookieArr.length; i++) {
                let cookiePair = cookieArr[i].split("=");

                /* Removing whitespace at the beginning of the cookie name
                and compare it with the given string */
                if (name == cookiePair[0].trim()) {
                    return decodeURIComponent(cookiePair[1]);
                }
            }

            // Return null if not found
            return null;
        }
        function handleClick() {
            let token = getCookie("Authorization");
            let ajaxSettings = {
                type : 'POST',
                url: '/client/addToCart',
                data : {
                    idSanPhamChiTiet : selectedId,
                    quantity : 1
                },
                success: function(response) {
                    debugger;
                    toastr.success('Đã thêm vào giỏ hàng');
                    location.reload();
                },
            };
            if (token) {
                ajaxSettings.headers = {
                    'Authorization': 'Bearer ' + token
                };
            };
            $.ajax(ajaxSettings);
        }

        function addToCartAndCheckout() {
            let token = getCookie("Authorization");
            let ajaxSettings = {
                type : 'POST',
                url: '/client/addToCart',
                data : {
                    idSanPhamChiTiet : selectedId,
                    quantity : 1
                },
                success: function(response) {
                    location.href = "/client/checkout";
                },
            };
            if (token) {
                ajaxSettings.headers = {
                    'Authorization': 'Bearer ' + token
                };
            };
            $.ajax(ajaxSettings);
        }
    </script>
</th:block>

</html>
